card_trash_plan:
  template: card_stats
  triggers_update: "all"
  icon: |
    [[[
      var trash_icon = {
        "default": "mdi:recycle",
        "gft": "mdi:food-drumstick",
        "pmd": "mdi:bottle-soda-classic",
        "papier": "mdi:package-variant",
        "best-tas": "mdi:tshirt-crew",
        "restafval": "mdi:trash-can"
      }
      var state = 'default';
      if(variables.today_entity && states[variables.today_entity].state !== 'None'){
        state = states[variables.today_entity].state;
      }
      else if(variables.tomorrow_entity && states[variables.tomorrow_entity].state !== 'None'){
        state = states[variables.tomorrow_entity].state;
      }
      else if(variables.upcoming_entity && states[variables.upcoming_entity].state !== 'None'){
        state = states[variables.upcoming_entity].attributes.Upcoming_waste_types;
      }
      return (trash_icon[state] || trash_icon["default"]);
    ]]]
  name: >
    [[[
      if(variables.today_entity && states[variables.today_entity].state !== 'None'){
        return 'Today';
      }
      else if(variables.tomorrow_entity && states[variables.tomorrow_entity].state !== 'None'){
        return 'Tomorrow';
      }
      else if(variables.upcoming_entity && states[variables.upcoming_entity].state !== 'None'){
        return states[variables.upcoming_entity].attributes.Days_until;
      }
      else {
        return 'No upcoming plan';
      }
    ]]]
  label: >
    [[[
      var trash_label = {
        "default": "",
        "gft": "Groente, fruit en tuinafval",
        "pmd": "Plastic, metaal, drankkartons",
        "papier": "Papier en kartons",
        "best-tas": "BEST-tas",
        "restafval": "Restafval"
      }
      var state = 'default';
      if(variables.today_entity && states[variables.today_entity].state !== 'None'){
        state = states[variables.today_entity].state;
      }
      else if(variables.tomorrow_entity && states[variables.tomorrow_entity].state !== 'None'){
        state = states[variables.tomorrow_entity].state;
      }
      else if(variables.upcoming_entity && states[variables.upcoming_entity].state !== 'None'){
        state = states[variables.upcoming_entity].attributes.Upcoming_waste_types;
      }
      return (trash_label[state] || trash_label["default"]);
    ]]]
  show_label: >
    [[[
      if(variables.today_entity && states[variables.today_entity].state !== 'None') ||
        (variables.tomorrow_entity && states[variables.tomorrow_entity].state !== 'None') ||
        (variables.upcoming_entity && states[variables.upcoming_entity].state !== 'None'))
        return true;
      }
      else {
        return false;
      }
    ]]]
  custom_fields:
    unit: >
      [[[
        if(variables.today_entity && states[variables.today_entity].state !== 'None'){
          return '';
        }
        else if(variables.tomorrow_entity && states[variables.tomorrow_entity].state !== 'None'){
          return '';
        }
        else if(variables.upcoming_entity && states[variables.upcoming_entity].state !== 'None'){
          return 'Days';
        }
        else {
          return '';
        }
      ]]]
  styles:
    card:
      - background-color: >
          [[[
            var trash_color = {
              "default": "contrast2",
              "gft": "green",
              "pmd": "orange",
              "papier": "blue",
              "best-tas": "purple",
              "restafval": "contrast20"
            }
            var state = 'default';
            if(variables.today_entity && states[variables.today_entity].state !== 'None'){
              state = states[variables.today_entity].state;
            }
            else if(variables.tomorrow_entity && states[variables.tomorrow_entity].state !== 'None'){
              state = states[variables.tomorrow_entity].state;
            }
            else if(variables.upcoming_entity && states[variables.upcoming_entity].state !== 'None'){
              state = states[variables.upcoming_entity].state;
            }
            return 'var(--' + (trash_color[state] || trash_color["default"]) + ')';
          ]]]
    name:
      - color: >
          [[[
            var state = 'default';
            if(variables.today_entity && states[variables.today_entity].state !== 'None'){
              state = states[variables.today_entity].state;
            }
            else if(variables.tomorrow_entity && states[variables.tomorrow_entity].state !== 'None'){
              state = states[variables.tomorrow_entity].state;
            }

            if(state == 'restafval') {
              return 'var(--contrast1)';
            }
            else if(state != 'default') {
              return 'var(--black)';
            }
            else {
              return 'var(--contrast20)';
            }
          ]]]
    label:
      - color: >
          [[[
            var state = 'default';
            if(variables.today_entity && states[variables.today_entity].state !== 'None'){
              state = states[variables.today_entity].state;
            }
            else if(variables.tomorrow_entity && states[variables.tomorrow_entity].state !== 'None'){
              state = states[variables.tomorrow_entity].state;
            }

            if(state == 'restafval') {
              return 'var(--contrast1)';
            }
            else if(state != 'default') {
              return 'var(--black)';
            }
            else {
              return 'var(--contrast20)';
            }
          ]]]
    icon:
      - color: >
          [[[
            var state = 'default';
            if(variables.today_entity && states[variables.today_entity].state !== 'None'){
              state = states[variables.today_entity].state;
            }
            else if(variables.tomorrow_entity && states[variables.tomorrow_entity].state !== 'None'){
              state = states[variables.tomorrow_entity].state;
            }

            if(state == 'restafval') {
              return 'var(--contrast1)';
            }
            else if(state != 'default') {
              return 'var(--black)';
            }
            else {
              return 'var(--contrast20)';
            }
          ]]]
